{% extends 'base.html' %}

{% block titulo %}{{ titulo }}{% endblock %}

{% block body %}

{% for tematica in tematicas %}
<section class="position-relative padding-small">
  <div class="container">
    <div class="section-title d-md-flex justify-content-between align-items-center mb-4">
      <h3 class="d-flex align-items-center">{{ tematica.titulo | upper }}</h3>
    </div>


    <div class="product-slider-button-prev {{ tematica.id }}-prev">
      <svg width="60" height="60">
        <use xlink:href="#alt-arrow-left-outline"></use>
      </svg>
    </div>
    <div class="product-slider-button-next {{ tematica.id }}-next">
      <svg width="60" height="60">
        <use xlink:href="#alt-arrow-right-outline"></use>
      </svg>
    </div>

   
    <div class="swiper product-swiper {{ tematica.id }}-swiper">
      <div class="swiper-wrapper">
        {% for publicacion in tematica.publicaciones %}
        <div class="swiper-slide">
          <div class="card position-relative p-4 border rounded-3 shadow-sm">
            <img src="{{ url_for('static', filename=publicacion.imagen) }}"
                 class="img-fluid shadow-sm" alt="{{ publicacion.titulo }}">
            <h6 class="mt-4 mb-0 fw-bold">{{ publicacion.titulo }}</h6>
            <div class="review-content d-flex flex-column">
              <p class="my-2 fs-6 text-black-50">{{ publicacion.autor }}</p>
              <p class="text-muted small mb-0">
                Publicado por <strong>{{ publicacion.usuario }}</strong> ({{ publicacion.facultad }})
              </p>
            </div>

            <!-- Botones: intercambio + favoritos (redireccion temporal) -->
            <div class="card-concern position-absolute start-0 end-0 d-flex gap-2 justify-content-center">
              <a href="{{ url_for('formulario_intercambio', 
                    libro=publicacion.titulo, 
                    propietario=publicacion.usuario) }}"
                    class="btn btn-dark" title="Solicitar intercambio">
                <svg class="cart"><use xlink:href="#cart"></use></svg>
              </a>
              <a href="{{ url_for('index') }}" 
                class="btn btn-dark" 
                title="Agregar a favoritos">
                <svg class="wishlist"><use xlink:href="#heart"></use></svg>
              </a>

            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</section>
{% endfor %}
{% endblock %}